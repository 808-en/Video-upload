<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video and Audio Uploads</title>
    <style>
        body {
            background-color: lightblue;
            font-family: sans-serif;
            margin: 20px;
        }
        h1 {
            color: navy;
            text-align: center;
        }
        .upload-container {
            text-align: center;
            margin-top: 30px;
        }
        .upload-button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .upload-form {
            display: none;
            margin-top: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: white;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .upload-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        .upload-form input[type="text"],
        .upload-form input[type="file"] {
            width: calc(100% - 20px);
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .upload-form button[type="submit"] {
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .portfolio-container {
            display: none;
            margin-top: 30px;
            border: 1px solid #f8d7da;
            background-color: #fff3cd; /* Orange-ish */
            padding: 20px;
            border-radius: 8px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .portfolio-item {
            margin-bottom: 15px;
            padding: 10px;
            border-bottom: 1px solid #ffeeba;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .portfolio-item:last-child {
            border-bottom: none;
        }
        .portfolio-details {
            flex-grow: 1;
        }
        .download-buttons {
            display: flex;
            gap: 10px; /* Space between buttons */
        }
        .download-button {
            background-color: #007bff;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <h1>Video and Audio Uploads</h1>

    <div class="upload-container">
        <button class="upload-button" onclick="openUploadForm()">Upload New Content</button>
    </div>

    <div class="upload-form" id="uploadForm">
        <form id="contentForm">
            <label for="videoTitle">Video Title:</label>
            <input type="text" id="videoTitle" required>

            <label for="videoFile">Video File:</label>
            <input type="file" id="videoFile" required>

            <label for="audioFile">Audio File:</label>
            <input type="file" id="audioFile" required>

            <button type="submit">Submit</button>
        </form>
    </div>

    <div class="portfolio-container" id="portfolioContainer">
        <h2>Your Uploads</h2>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', function() {
    loadPortfolio();
});

function openUploadForm() {
    document.getElementById('uploadForm').style.display = 'block';
    document.getElementById('portfolioContainer').style.display = 'none';
}

function loadPortfolio() {
    const portfolioContainer = document.getElementById('portfolioContainer');
    portfolioContainer.innerHTML = '<h2>Your Uploads</h2>';
    const storedPortfolio = localStorage.getItem('portfolioItems');
    if (storedPortfolio) {
        const portfolioItems = JSON.parse(storedPortfolio);
        portfolioItems.forEach(item => {
            displayPortfolioItem(item);
        });
    }
}

function savePortfolio(item) {
    let portfolioItems = [];
    const storedPortfolio = localStorage.getItem('portfolioItems');
    if (storedPortfolio) {
        portfolioItems = JSON.parse(storedPortfolio);
    }
    portfolioItems.push(item);
    localStorage.setItem('portfolioItems', JSON.stringify(portfolioItems));
}

function displayPortfolioItem(item) {
    const portfolioContainer = document.getElementById('portfolioContainer');
    const portfolioItemElement = document.createElement('div');
    portfolioItemElement.classList.add('portfolio-item');

    const portfolioDetails = document.createElement('div');
    portfolioDetails.classList.add('portfolio-details');

    const titleElement = document.createElement('h3');
    titleElement.textContent = item.videoTitle;

    const videoFileName = document.createElement('p');
    videoFileName.textContent = `Video: ${item.videoFileName}`;

    const audioFileName = document.createElement('p');
    audioFileName.textContent = `Audio: ${item.audioFileName}`;

    portfolioDetails.appendChild(titleElement);
    portfolioDetails.appendChild(videoFileName);
    portfolioDetails.appendChild(audioFileName);
    portfolioItemElement.appendChild(portfolioDetails);

    const downloadButtons = document.createElement('div');
    downloadButtons.classList.add('download-buttons');

    if (item.videoFileContent) {
        const videoDownloadButton = document.createElement('button');
        videoDownloadButton.classList.add('download-button');
        videoDownloadButton.textContent = 'Download Video';
        videoDownloadButton.onclick = function() {
            const videoDownloadLink = document.createElement('a');
            videoDownloadLink.href = item.videoFileContent;
            videoDownloadLink.download = item.videoFileName;
            document.body.appendChild(videoDownloadLink);
            videoDownloadLink.click();
            document.body.removeChild(videoDownloadLink);
        };
        downloadButtons.appendChild(videoDownloadButton);
    }

    if (item.audioFileContent) {
        const audioDownloadButton = document.createElement('button');
        audioDownloadButton.classList.add('download-button');
        audioDownloadButton.textContent = 'Download Audio';
        audioDownloadButton.onclick = function() {
            const audioDownloadLink = document.createElement('a');
            audioDownloadLink.href = item.audioFileContent;
            audioDownloadLink.download = item.audioFileName;
            document.body.appendChild(audioDownloadLink);
            audioDownloadLink.click();
            document.body.removeChild(audioDownloadLink);
        };
        downloadButtons.appendChild(audioDownloadButton);
    }

    portfolioItemElement.appendChild(downloadButtons);
    portfolioContainer.appendChild(portfolioItemElement);
}

document.getElementById('contentForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const videoTitle = document.getElementById('videoTitle').value;
    const videoInput = document.getElementById('videoFile');
    const audioInput = document.getElementById('audioFile');

    const videoFile = videoInput.files[0];
    const audioFile = audioInput.files[0];

    const readerVideo = new FileReader();
    const readerAudio = new FileReader();

    let videoFileContent = null;
    let audioFileContent = null;

    // Read video file as Data URL (Base64)
    readerVideo.onload = function(e) {
        videoFileContent = e.target.result;
        // Check if both files are processed
        if (audioFileContent !== null) {
            addItemToPortfolio();
        }
    };
    readerVideo.readAsDataURL(videoFile);

    // Read audio file as Data URL (Base64)
    readerAudio.onload = function(e) {
        audioFileContent = e.target.result;
        // Check if both files are processed
        if (videoFileContent !== null) {
            addItemToPortfolio();
        }
    };
    readerAudio.readAsDataURL(audioFile);

    function addItemToPortfolio() {
        const newPortfolioItem = {
            videoTitle: videoTitle,
            videoFileName: videoFile ? videoFile.name : '',
            audioFileName: audioFile ? audioFile.name : '',
            videoFileContent: videoFileContent,
            audioFileContent: audioFileContent
        };

        savePortfolio(newPortfolioItem);
        displayPortfolioItem(newPortfolioItem); // Add the new item to the display immediately
        document.getElementById('uploadForm').style.display = 'none'; // Hide the upload form
        document.getElementById('portfolioContainer').style.display = 'block'; // Show the portfolio container
        document.getElementById('contentForm').reset(); // Clear the form
    }
});
    </script>

</body>
</html>
